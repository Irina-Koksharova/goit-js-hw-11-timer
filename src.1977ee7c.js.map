{"version":3,"sources":["js/canvas.js","index.js"],"names":["gl","c","getContext","preserveDrawingBuffer","w","width","window","innerWidth","h","height","innerHeight","webgl","opts","projectileAlpha","projectileLineWidth","fireworkAngleSpan","baseFireworkVel","addedFireworkVel","gravity","lowVelBoundary","xFriction","baseShardVel","addedShardVel","fireworks","baseShardsParFirework","addedShardsParFirework","shardFireworkVelMultiplier","initHueMultiplier","runHueAdder","vertexShaderSource","fragmentShaderSource","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","useProgram","dataAttribLoc","getAttribLocation","dataBuffer","createBuffer","enableVertexAttribArray","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","resUniformLoc","getUniformLocation","modeUniformLoc","viewport","uniform2f","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","lineWidth","data","clear","uniform1i","a","draw","TRIANGLES","length","glType","bufferData","Float32Array","STATIC_DRAW","drawArrays","tick","sins","coss","maxShardsParFirework","tau","i","Math","sin","cos","Firework","reset","shards","push","Shard","parent","anim","requestAnimationFrame","map","firework","step","LINES","prototype","angle","PI","random","vel","mode","vx","vy","x","y","hue","ph","px","py","shardAmount","baseAngle","X","allDead","shard","dead","starty","addEventListener","e","clientX","clientY","refs","days","document","querySelector","hours","mins","secs","INTERVAL","CountdownTimer","selector","saleTime","updateTimer","setInterval","getTimeComponents","getTime","Date","now","time","formatTimeComponents","floor","value","String","padStart","textContent","timer","start"],"mappings":"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","file":"src.1977ee7c.js","sourceRoot":"..\\src","sourcesContent":["var gl = c.getContext( 'webgl', { preserveDrawingBuffer: true } )\r\n\t,\tw = c.width = window.innerWidth\r\n\t,\th = c.height = window.innerHeight\r\n\r\n\t,\twebgl = {}\r\n\t,\topts = {\r\n\t\tprojectileAlpha: .8,\r\n\t\tprojectileLineWidth: 1.3,\r\n\t\tfireworkAngleSpan: .5,\r\n\t\tbaseFireworkVel: 3,\r\n\t\taddedFireworkVel: 3,\r\n\t\tgravity: .03,\r\n\t\tlowVelBoundary: -.2,\r\n\t\txFriction: .995,\r\n\t\tbaseShardVel: 1,\r\n\t\taddedShardVel: .2,\r\n\t\tfireworks: 1000,\r\n\t\tbaseShardsParFirework: 10,\r\n\t\taddedShardsParFirework: 10,\r\n\t\tshardFireworkVelMultiplier: .3,\r\n\t\tinitHueMultiplier: 1/360,\r\n\t\trunHueAdder: .1/360\r\n\t}\r\n\r\nwebgl.vertexShaderSource = `\r\nuniform int u_mode;\r\nuniform vec2 u_res;\r\nattribute vec4 a_data;\r\nvarying vec4 v_color;\r\n\r\nvec3 h2rgb( float h ){\r\n\treturn clamp( abs( mod( h * 6. + vec3( 0, 4, 2 ), 6. ) - 3. ) -1., 0., 1. );\r\n}\r\nvoid clear(){\r\n\tgl_Position = vec4( a_data.xy, 0, 1 );\r\n\tv_color = vec4( 0, 0, 0, a_data.w );\r\n}\r\nvoid draw(){\r\n\tgl_Position = vec4( vec2( 1, -1 ) * ( ( a_data.xy / u_res ) * 2. - 1. ), 0, 1 );\r\n\tv_color = vec4( h2rgb( a_data.z ), a_data.w );\r\n}\r\nvoid main(){\r\n\tif( u_mode == 0 )\r\n\t\tdraw();\r\n\telse\r\n\t\tclear();\r\n}\r\n`;\r\nwebgl.fragmentShaderSource = `\r\nprecision mediump float;\r\nvarying vec4 v_color;\r\n\r\nvoid main(){\r\n\tgl_FragColor = v_color;\r\n}\r\n`;\r\n\r\nwebgl.vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\ngl.shaderSource( webgl.vertexShader, webgl.vertexShaderSource );\r\ngl.compileShader( webgl.vertexShader );\r\n\r\nwebgl.fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\ngl.shaderSource( webgl.fragmentShader, webgl.fragmentShaderSource );\r\ngl.compileShader( webgl.fragmentShader );\r\n\r\nwebgl.shaderProgram = gl.createProgram();\r\ngl.attachShader( webgl.shaderProgram, webgl.vertexShader );\r\ngl.attachShader( webgl.shaderProgram, webgl.fragmentShader );\r\n\r\ngl.linkProgram( webgl.shaderProgram );\r\ngl.useProgram( webgl.shaderProgram );\r\n\r\nwebgl.dataAttribLoc = gl.getAttribLocation( webgl.shaderProgram, 'a_data' );\r\nwebgl.dataBuffer = gl.createBuffer();\r\n\r\ngl.enableVertexAttribArray( webgl.dataAttribLoc );\r\ngl.bindBuffer( gl.ARRAY_BUFFER, webgl.dataBuffer );\r\ngl.vertexAttribPointer( webgl.dataAttribLoc, 4, gl.FLOAT, false, 0, 0 );\r\n\r\nwebgl.resUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_res' );\r\nwebgl.modeUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_mode' );\r\n\r\ngl.viewport( 0, 0, w, h );\r\ngl.uniform2f( webgl.resUniformLoc, w, h );\r\n\r\ngl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\ngl.enable( gl.BLEND );\r\n\r\ngl.lineWidth( opts.projectileLineWidth );\r\n\r\nwebgl.data = [];\r\n\r\nwebgl.clear = function(){\r\n\t\r\n\tgl.uniform1i( webgl.modeUniformLoc, 1 );\r\n\tvar a = .1;\r\n\twebgl.data = [\r\n\t\t-1, -1, 0, a,\r\n\t\t 1, -1, 0, a,\r\n\t\t-1,  1, 0, a,\r\n\t\t-1,  1, 0, a,\r\n\t\t 1, -1, 0, a,\r\n\t\t 1,  1, 0, a\r\n\t];\r\n\twebgl.draw( gl.TRIANGLES );\r\n\tgl.uniform1i( webgl.modeUniformLoc, 0 );\r\n\twebgl.data.length = 0;\r\n}\r\nwebgl.draw = function( glType ){\r\n\t\r\n\tgl.bufferData( gl.ARRAY_BUFFER, new Float32Array( webgl.data ), gl.STATIC_DRAW );\r\n\tgl.drawArrays( glType, 0, webgl.data.length / 4 );\r\n}\r\n\r\nvar\tfireworks = []\r\n\t,\ttick = 0\r\n\t,\tsins = []\r\n\t,\tcoss = []\r\n\t,\tmaxShardsParFirework = opts.baseShardsParFirework + opts.addedShardsParFirework\r\n\t,\ttau = 6.283185307179586476925286766559;\r\n\r\nfor( var i = 0; i < maxShardsParFirework; ++i ){\r\n\tsins[ i ] = Math.sin( tau * i / maxShardsParFirework );\r\n\tcoss[ i ] = Math.cos( tau * i / maxShardsParFirework );\r\n}\r\n\r\nfunction Firework(){\r\n\tthis.reset();\r\n\tthis.shards = [];\r\n\tfor( var i = 0; i < maxShardsParFirework; ++i )\r\n\t\tthis.shards.push( new Shard( this ) );\r\n}\r\nFirework.prototype.reset = function(){\r\n\t\r\n\tvar angle = -Math.PI / 2 + ( Math.random() - .5 )* opts.fireworkAngleSpan\r\n\t\t,\tvel = opts.baseFireworkVel + opts.addedFireworkVel * Math.random();\r\n\t\r\n\tthis.mode = 0;\r\n\tthis.vx = vel * Math.cos( angle );\r\n\tthis.vy = vel * Math.sin( angle );\r\n\t\r\n\tthis.x = Math.random() * w;\r\n\tthis.y = h;\r\n\t\r\n\tthis.hue = tick * opts.initHueMultiplier;\r\n\t\r\n}\r\nFirework.prototype.step = function(){\r\n\t\r\n\tif( this.mode === 0 ){\r\n\t\t\r\n\t\tvar ph = this.hue\r\n\t\t\t,\tpx = this.x\r\n\t\t\t,\tpy = this.y;\r\n\t\t\r\n\t\tthis.hue += opts.runHueAdder;\r\n\t\r\n\t\tthis.x += this.vx *= opts.xFriction;\r\n\t\tthis.y += this.vy += opts.gravity;\r\n\t\t\r\n\t\twebgl.data.push(\r\n\t\t\tpx, py, ph, opts.projectileAlpha * .2,\r\n\t\t\tthis.x, this.y, this.hue, opts.projectileAlpha * .2 );\r\n\t\t\r\n\t\tif( this.vy >= opts.lowVelBoundary ){\r\n\t\t\tthis.mode = 1;\r\n\r\n\t\t\tthis.shardAmount = opts.baseShardsParFirework + opts.addedShardsParFirework * Math.random() | 0;\r\n\r\n\t\t\tvar baseAngle = Math.random() * tau\r\n\t\t\t\t,\tx = Math.cos( baseAngle )\r\n\t\t\t\t,\ty = Math.sin( baseAngle )\r\n\t\t\t\t,\tsin = sins[ this.shardAmount ]\r\n\t\t\t\t,\tcos = coss[ this.shardAmount ];\r\n\r\n\t\t\tfor( var i = 0; i < this.shardAmount; ++i ){\r\n\r\n\t\t\t\tvar vel = opts.baseShardVel + opts.addedShardVel * Math.random();\r\n\t\t\t\tthis.shards[ i ].reset( x * vel, y * vel )\r\n\t\t\t\tvar X = x;\r\n\t\t\t\tx = x * cos - y * sin;\r\n\t\t\t\ty = y * cos + X * sin;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t} else if( this.mode === 1 ) {\r\n\t\t\r\n\t\tthis.ph = this.hue\r\n\t\tthis.hue += opts.runHueAdder;\r\n\t\t\r\n\t\tvar allDead = true;\r\n\t\tfor( var i = 0; i < this.shardAmount; ++i ){\r\n\t\t\tvar shard = this.shards[ i ];\r\n\t\t\tif( !shard.dead ){\r\n\t\t\t\tshard.step();\r\n\t\t\t\tallDead = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif( allDead )\r\n\t\t\tthis.reset();\r\n\t}\r\n\t\r\n}\r\nfunction Shard( parent ){\r\n\tthis.parent = parent;\r\n}\r\nShard.prototype.reset = function( vx, vy ){\r\n\tthis.x = this.parent.x;\r\n\tthis.y = this.parent.y;\r\n\tthis.vx = this.parent.vx * opts.shardFireworkVelMultiplier + vx;\r\n\tthis.vy = this.parent.vy * opts.shardFireworkVelMultiplier + vy;\r\n\tthis.starty = this.y;\r\n\tthis.dead = false;\r\n\tthis.tick = 1;\r\n}\r\nShard.prototype.step = function(){\r\n\t\r\n\tthis.tick += .05;\r\n\t\r\n\tvar px = this.x\r\n\t\t,\tpy = this.y;\r\n\t\r\n\tthis.x += this.vx *= opts.xFriction;\r\n\tthis.y += this.vy += opts.gravity;\r\n\t\r\n\tvar proportion = 1 - ( this.y - this.starty ) / ( h - this.starty );\r\n\t\r\n\twebgl.data.push(\r\n\t\tpx, py, this.parent.ph, opts.projectileAlpha / this.tick,\r\n\t\tthis.x, this.y, this.parent.hue, opts.projectileAlpha / this.tick );\r\n\t\r\n\tif( this.y > h )\r\n\t\tthis.dead = true;\r\n}\r\n\r\nfunction anim(){\r\n\t\r\n\twindow.requestAnimationFrame( anim )\r\n\t\r\n\twebgl.clear();\r\n\t\r\n\t++tick;\r\n\t\r\n\tif( fireworks.length < opts.fireworks )\r\n\t\tfireworks.push( new Firework );\r\n\t\r\n\tfireworks.map( function( firework ){ firework.step(); } );\r\n\t\r\n\twebgl.draw( gl.LINES );\r\n}\r\nanim();\r\n\r\nwindow.addEventListener( 'resize', function(){\r\n\t\r\n\tw = c.width = window.innerWidth;\r\n\th = c.height = window.innerHeight;\r\n\t\r\n\tgl.viewport( 0, 0, w, h );\r\n\tgl.uniform2f( webgl.resUniformLoc, w, h );\r\n})\r\nwindow.addEventListener( 'click', function( e ){\r\n\tvar firework = new Firework();\r\n\tfirework.x = e.clientX;\r\n\tfirework.y = e.clientY;\r\n\tfirework.vx = 0;\r\n\tfirework.vy = 0;\r\n\tfireworks.push( firework );\r\n});","import './styles.css';\r\nimport 'normalize.css';\r\nimport './js/canvas.js'\r\n\r\nconst refs = {\r\n    days: document.querySelector('[data-value=\"days\"]'),\r\n    hours: document.querySelector('[data-value=\"hours\"]'),\r\n    mins: document.querySelector('[data-value=\"mins\"]'),\r\n    secs: document.querySelector('[data-value=\"secs\"]'),\r\n}\r\n    \r\nconst INTERVAL = 1000;\r\n\r\nclass CountdownTimer {\r\n    constructor({ selector, saleTime, updateTimer }) {\r\n        this.selector = selector;\r\n        this.saleTime = saleTime;\r\n        this.updateTimer = updateTimer;\r\n    }\r\n\r\n    start() {\r\n        setInterval(() => {\r\n            const { days, hours, mins, secs } = this.getTimeComponents(this.saleTime.getTime() - Date.now());\r\n            this.updateTimer({ days, hours, mins, secs });\r\n        }, INTERVAL)\r\n    }\r\n    \r\n    getTimeComponents(time) {\r\n        const days = this.formatTimeComponents(Math.floor(time / (1000 * 60 * 60 * 24)));\r\n        const hours = this.formatTimeComponents(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\r\n        const mins = this.formatTimeComponents(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n        const secs = this.formatTimeComponents(Math.floor((time % (1000 * 60)) / 1000));\r\n        return { days, hours, mins, secs };\r\n    }\r\n\r\n    formatTimeComponents(value) {\r\n        return String(value).padStart(2, '0');\r\n    }\r\n}\r\n\r\nfunction updateTimer({ days, hours, mins, secs }) {\r\n    refs.days.textContent = `${days}`;\r\n    refs.hours.textContent = `${hours}`; \r\n    refs.mins.textContent = `${mins}`;\r\n    refs.secs.textContent = `${secs}`;\r\n}\r\n\r\nconst timer = new CountdownTimer({\r\n    selector: '#timer-1',\r\n    saleTime: new Date(2021, 0, 1),\r\n    updateTimer,\r\n});\r\n\r\ntimer.start();\r\n\r\n\r\n\r\n\r\n"]}